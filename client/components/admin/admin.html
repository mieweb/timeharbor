<template name="admin">
  <div class="flex flex-col gap-4">
    <h3 class="text-xl font-semibold">Administrative Time Entry Review</h3>

    <!-- Project Selection -->
    <div class="flex flex-col md:flex-row md:items-center gap-4 mb-4">
      <label for="adminTeamSelect" class="label">Select Project to Review:</label>
      <select id="adminTeamSelect" class="select select-bordered">
        <option value="">Choose a project...</option>
        {{#each adminTeams}}
          <option value="{{_id}}" {{isSelectedAdminTeam _id}}>{{name}}</option>
        {{/each}}
      </select>
    </div>

    {{#if selectedAdminTeamId}}


        <!-- Batch Actions -->
        <div class="card bg-base-100 shadow p-4 mb-4">
          <div class="flex flex-wrap items-center gap-4">
            <div class="flex gap-2">
              <button id="batchReviewed" class="btn btn-primary btn-sm" disabled>Mark as Reviewed</button>
              <button id="batchClosed" class="btn btn-success btn-sm" disabled>Mark as Closed</button>
              <button id="batchDeleted" class="btn btn-error btn-sm" disabled>Mark as Deleted</button>
            </div>
            <span id="selectedCount" class="text-sm text-gray-600">0 items selected</span>
            <!-- Help button -->
            <button id="helpButton" class="btn btn-circle btn-ghost btn-xs" title="Help with status meanings">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </button>
          </div>
        </div>

        <!-- AG Grid -->
        <div class="overflow-x-auto">
          <div id="adminGrid" class="ag-theme-alpine w-full" style="height: 560px;"></div>
        </div>

        {{#unless hasTickets}}
          <div class="alert alert-info">
            <p>No time entries found for this project.</p>
          </div>
        {{/unless}}
    {{else}}
      <div class="alert alert-warning">
        <p>Please select a project to review time entries. You can only review projects where you are an admin or leader.</p>
      </div>
         {{/if}}
   </div>

   <!-- Help Modal -->
   <div id="helpModal" class="modal">
     <div class="modal-box">
       <h3 class="font-bold text-lg mb-4">Status Meanings</h3>
       <div class="space-y-3">
         <div>
           <span class="badge badge-primary">Open</span>
           <p class="text-sm mt-1">Time entry is active and being worked on</p>
         </div>
         <div>
           <span class="badge badge-info">Reviewed</span>
           <p class="text-sm mt-1">Entry has been reviewed by admin/leader</p>
         </div>
         <div>
           <span class="badge badge-success">Closed</span>
           <p class="text-sm mt-1">Entry is finalized. For volunteer projects: complete. For paid projects: may indicate compensation processed.</p>
         </div>
         <div>
           <span class="badge badge-error">Deleted</span>
           <p class="text-sm mt-1">Entry has been marked for removal</p>
         </div>
       </div>
       <div class="modal-action">
         <button id="closeHelpModal" class="btn">Close</button>
       </div>
     </div>
   </div>
 </template>
